{"ts":1377502912751,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":true,"ts":1377502914174,"patch":[[{"diffs":[[1,"(function(){\n    brif.viewClass.signIn = Backbone.View.extend({\n        className: 'sign_in darkBg',\n        initialize: function(){\n            this.listenTo(brif.models.signIn, 'not authorizes', this.show);\n            window.addEventListener(\"message\", this.receiveMessage, false);\n        },\n        receiveMessage: function(event){\n            // console.log(event.origin);\n            // console.log(event.data);\n            // console.log(event.source);\n            switch(event.data) {\n                case 'accept':\n                    window.location.assign(window.location.origin + '/app');\n                    break;\n                case 'cancel':\n                    alert('no way you just canceled! you realy should reconsider..');\n                    break;\n                default:\n                    break;\n            }\n        },\n        render: function(){\n            this.$el.css('opacity',0);\n            this.$el.html(brif.templates.sign_in);\n            $('body').css('min-height', $(window).height());\n            $('body').html(this.el);\n            return this;\n        },\n        show: function(){\n            this.$el.css('opacity',1);\n        },\n        continueToApp: function(){\n            Backbone.router.navigate('');  \n        },\n        openAuthWindow: function(){\n            gapi.auth.authorize({\n                response_type: 'code',\n                client_id: this.model.get('web').client_id,\n                approval_prompt : 'force',\n                access_type : 'offline',\n                scope: this.model.get('scopes'),\n                redirect_uri : this.model.get('web').redirect_uris[0],\n                state: this.model.get('stationName')\n            }, this.model.handleAuthResult);\n            return false;\n        },\n        events: {\n            'click #authorize-button': 'openAuthWindow'\n        }\n    });\n    brif.views.signIn = new brif.viewClass.signIn({model: brif.models.signIn});\n    $(document).ready(function(){\n        brif.views.signIn.render();\n    });\n})();\n"]],"start1":0,"start2":0,"length1":0,"length2":2032}]],"length":2032,"saved":false}
{"ts":1377502954987,"patch":[[{"diffs":[[0,"istenTo("],[-1,"brif.models.signIn"],[1,"this"],[0,", 'not a"]],"start1":151,"start2":151,"length1":34,"length2":20}]],"length":2018,"saved":false}
{"ts":1377502956217,"patch":[[{"diffs":[[0,"nTo(this"],[1,"."],[0,", 'not a"]],"start1":155,"start2":155,"length1":16,"length2":17}]],"length":2019,"saved":false}
{"ts":1377502957622,"patch":[[{"diffs":[[0,"To(this."],[1,"model"],[0,", 'not a"]],"start1":156,"start2":156,"length1":16,"length2":21}]],"length":2024,"saved":false}
